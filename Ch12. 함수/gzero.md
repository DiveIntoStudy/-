## 1. 함수란?

- 함수는 일련의 과정을 문(statement)으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것
- 함수는 매개변수(parameter), 인수(argument), 반환값(return)으로 구성되어 있다.
  ![KakaoTalk_Photo_2024-10-08-07-34-17.jpeg](https://prod-files-secure.s3.us-west-2.amazonaws.com/eaddb64d-4ef4-4d1b-b58f-48438f5bb3ee/194fd396-cf7b-4ae5-8801-c89b15dabe58/KakaoTalk_Photo_2024-10-08-07-34-17.jpeg)
- 함수는 함수 정의를 통해 생성된다.
- 인수를 매개변수를 통해 함수에 전달하면서, 함수를 명시적으로 지시해야 함수가 실행된다

## 2. 함수를 사용하는 이유

- 유지보수의 편의성: 코드 중복 억제, 재사용성을 높임
- 코드 신뢰성 높임: 실수를 줄여
- 코드 가독성 향상 : 함수는 이름을 붙일 수 있어, 함수 내부 코드를 이해하지 않고도 함수의 역할을 이름으로 정의할 수 있다.

## 3. 함수 리터럴

- 함수는 함수 리터럴로 생성될 수 있다.
- 함수 리터럴은 function 키워드, 함수 이름, 매개 변수 목록, 함수 몸체로 구성된다

| 함수 이름 | - 함수 이름은 식별자다. 따라서 식별자 네이밍 규칙을 따라야한다.

- 함수 이름은 **함수 몸체 내에서만 참조**할 수 있는 식별자다.
- | 함수 이름은 생략할 수 있다. (기명함수: 이름이 있는 함수, 익명함수: 이름이 없는 함수) |
  | ------------------------------------------------------------------------------------ | -------------------------------------------------------- |
  | 매개변수 목록                                                                        | - 0개 이상의 매개변수를 소괄호로 감싸고 쉼표로 구분한다. |
- 매개변수 목록은 순서에 의미가 있다.
- 매개변수는 함수 몸체 내에서 변수와 동일하게 취급된다. 따라서 매개변수도 식별자 네이밍 규칙을 준수해야한다. |
  | 함수 몸체 | - 함수가 호출되었을 때 일괄적으로 실행될 문들을 하나의 실행 단위로 정의한 코드 블록
- 함수 몸체는 함수 호출에 의해 실행된다. |

## 4. 함수 정의

- 정의된 함수는 자바스크립트 엔진에 의해 평가되어 함수 객체가 된다.
- 함수를 정의하는 방법은 4가지가 있다

```jsx
// 함수 선언문
function add(x, y) {
  return x + y;
}

// 함수 표현식
var add = function (x, y) {
  return x + y;
};

// Function 생성자 함수
var add = new Function("x", "y", "return x + y");

// 화살표 함수
var add = (x, y) => x + y;
```

- 변수는 ‘선언’한다고 했지만, 함수는 ‘정의’한다고 표현한다.
  - 함수 선언문이 평가되면 식별자가 암묵적으로 생성되고 함수 객체가 할당되어서 ‘정의’한다고 표현한다.

### 4-1. 함수 선언문

- 함수 선언문은 이름을 생략할 수 없다.

- 함수 선언문은 표현식이 아닌 문(statement)라서 함수 선언문을 실행하면 완료 값 `undefined` 가 출력된다.

![KakaoTalk_Photo_2024-10-08-08-03-37.jpeg](https://prod-files-secure.s3.us-west-2.amazonaws.com/eaddb64d-4ef4-4d1b-b58f-48438f5bb3ee/498ded4f-ed7f-4535-b21a-fa094a4a2635/KakaoTalk_Photo_2024-10-08-08-03-37.jpeg)

![스크린샷 2024-10-08 08.00.17.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/eaddb64d-4ef4-4d1b-b58f-48438f5bb3ee/bfa84cea-b951-4c55-8aa4-d83c7dc8d803/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-10-08_08.00.17.png)

- 자바스크립트 엔진은 생성된 함수를 호출하기 위해 함수 이름과 동일한 이름의 식별자를 암묵적으로 생성하고, 거기에 함수 객체를 할당한다.
- 함수는 함수 이름으로 호출하는 것이 아니라 함수 객체를 가리키는 식별자로 호출한다.
- 자바스크립트 엔진은 함수 선언문을 함수 표현식으로 변환해 함수 객체를 생성한다고 생각할 수 있다.

### 4-2. 함수 표현식

- 함수는 일급 객체이다. 값의 성질을 갖는 객체를 일급 객체라고 한다. 즉, 함수는 값처럼 변수에 할당할 수도 있고, 프로퍼티 값이 될 수도 있으며, 배열의 요소가 될 수도 있다.
- 함수는 일급 객체이므로, 함수 리터럴로 생성한 함수를 변수에 할당할 수 있다. 이러한 정의 방식을 **함수 표현식**이라고 한다.
- 함수 표현식의 함수 리터럴은 함수 이름을 생략하는 것이 일반적이다.
- 함수를 호출할 때는 함수 이름이 아니라 함수 객체를 가리키는 식별자를 사용해야한다.

```jsx
// 기명 함수 표현식
var add = function foo(x, y) {
  return x + y;
};

// 함수 객체를 가리키는 식별자로 호출
console.log(add(2, 5));

// 함수 이름으로 호출하면 ReferenceError가 발생한다
// 함수 이름은 함수 몸체 내부에서만 유효한 식별자다
console.log(foo(2, 5)); // ReferenceError: foo is not defined
```

### 4-3. 함수 생성 시점과 함수 호이스팅

```jsx
// 함수 참조
console.dir(add); // f add (x, y)
console.dir(sub); // undefined

// 함수 호출
console.log(add(2, 5)); // 7
console.log(sub(2, 5)); // TypeError: sub is not a function

// 함수 선언문
function add(x, y) {
  return x + y;
}

// 함수 표현문
var sub = function (x, y) {
  return x - y;
};
```

- 위 예제처럼 함수 선언문으로 정의한 함수는 함수 선언문 이전에 호출할 수 있고, 함수 표현식으로 정의한 함수는 함수 표현식 이전에 호출할 수 없다.
- 함수 선언문으로 정의한 함수는 함수 선언문 이전에 호출할 수 있는 이유는?
  - 함수 선언문은 코드 평가 과정에서 자바스크립트 엔진에 의해 함수 이름과 동일한 이름의 식별자를 암묵적으로 생성하고, 생성된 함수 객체를 할당하기 때문이다.
  - 이처럼 함수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 것을 **함수 호이스팅**이라고 한다.
  - 함수 호이스팅은 함수를 호출하기 전에 반드시 함수를 선언해야한다는 규칙을 무시하기 때문에, 함수 표현식을 사용할 것을 권장한다.
- 함수 표현식으로 정의한 함수는 함수 표현식 이전에 호출할 수 없는 이유는?
  - 함수 표현식은 변수에 할당되는 값이 함수 리터럴인 문이다. 즉 변수에 값이 할당되는 것과 같이, 변수 선언은 런타임 이전에 실행되어 undefined로 초기화되지만, 변수 할당문의 값은 런타임에 평가된다. 그래서 함수 리터럴도 할당문이 실행되는 시점에 평가되어 함수 객체가 된다.
  - 함수 표현식으로 함수를 정의하면 **변수 호이스팅**이 발생한다.

### 4-4. Function 생성자 함수

```jsx
var add = new Function("x", "y", "return x + y");
console.log(add(3, 5)); // 8
```

- Function 생성자 함수로 함수를 생성하는 방식은 일반적이지 않으며 바람직하지도 않다. Function 생성자 함수로 생성한 함수는 클로저를 생성하지 않는 등, 함수 선언문이나 함수 표현식으로 생성한 함수와 다르게 동작한다.

### 4-5. 화살표 함수

```jsx
const add = (x, y) => x + y;
console.log(add(3, 5)); // 8
```

- 화살표 함수는 항상 익명 함수로 정의한다.
- 기존 함수보다 표현만 간략한 것이 아니라 내부 동작 또한 간략화되었다.
  - 기존 함수와 this 바인딩 방식이 다르고, prototype 프로퍼티가 없으며, arguments 객체를 생성하지 않는다.

## 5. 함수 호출

- 함수를 호출하면 현재의 실행 흐름을 중단하고 호출된 함수로 실행 흐름을 옮긴다.
- 이때 매개변수에 인수가 순서대로 할당되고 함수 몸체의 문들이 실행되기 시작한다.

### 5-1. 매개변수와 인수

- 인수: 값으로 평가될 수 있는 표현식
- 매개변수
  - 함수를 정의할 때 선언
  - 함수 몸체 내부에서 변수와 동일하게 취급
  - 매개변수 스코프(유효 범위)는 함수 내부다

### 5-2. 인수 확인

- 함수는 매개변수의 개수와 인수의 개수가 일치하는지 체크하지 않는다
  - 모든 인수는 암묵적으로 arguments 객체의 프로퍼티로 보관된다.
- 자바스크립트는 동적 타입 언어이다. 따라서 자바스크립트 함수는 매개변수의 타입을 사전에 지정할 수 없다.

→ 타입스크립트를 도입하거나, ES6에 도입된 매개변수 기본 값을 사용하면 도움이 된다

### 5-3. 매개변수의 최대 개수

- 이상적인 함수는 한 가지 일만 해야 하고, 가급적 작게 만들어야 한다
- 매개변수는 최대 3개 이상을 넘지 않는 것을 권장
- 3개 이상의 매개변수가 필요하다면, 하나의 매개변수를 선언하고 객체를 인수로 전달하는 것이 유리하다
  - 객체를 인수로 전달할때 주의할 점은 함수 외부에서 함수 내부로 전달한 객체를 함수 내부에서 변경하면 함수 외부의 객체가 변경되는 부수 효과가 발생한다

### 5-4. 반환문

- 반환문은 함수의 실행을 중단하고 몸체를 빠져나간다
- 반환문은 return 뒤에 오는 표현식을 평가해 반환한다.
- 반환문은 함수 몸체 내부에서만 사용할 수 있다. 전역에서 반환문을 사용하면 문법 에러가 발생한다
  - Node.js는 모듈 시스템에 의해 파일별로 독립적인 파일 스코프를 갖는다. 따라서 Node.js 환경에서는 파일의 가장 바깥 영역에 반환문을 사용해도 에러가 발생하지 않는다.

## 6. 참조에 의한 전달과 외부 상태의 변경

```jsx
// 매개변수 primitive는 원시 값을 전달받고, 매개변수 obj는 객체를 전달받는다
function changeVal(primitive, obj) {
  primitive += 100;
  obj.name = "Kim";
}

// 외부 상태
var num = 100;
var person = { name: "Lee" };

console.log(num); // 100
consooe.log(person); // {name: 'Lee'}

// 원시 값은 값 자체가 복사되어 전달되고 객체는 참조 값이 복사되어 전달된다.
changeVal(num, persone);

// 원시 값은 원본이 훼손되지 않는다
console.log(num); // 100

// 객체는 원본이 훼손된다
console.log(person); // {name: 'Kim'}
```

## 7. 다양한 함수의 형태

- 재귀 함수
  - 함수가 자기 자신을 호출하는 함수
  - 함수 내부에서 함수 이름을 사용해 자기 자신을 호출할 수 있다. 함수 이름 혹은 함수를 가리키는 식별자로 자기 자신을 호출 할 수 있다.
  - 재귀 함수는 반드시 탈출 조건을 만들어야 한다
  - for문이나 while문으로 구현 가능하다
  - 재귀 함수는 반복문을 사용하는 것보다 재귀 함수를 사용하는 편이 더 직관적으로 이해하기 쉬울 때만 한정적으로 사용하는 것이 좋다
- 중첩 함수
  - 함수 내부에 정의된 함수를 중첩 함수라 한다
- 콜백 함수
  - 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수를 콜백 함수라 한다
- 고차 함수
  - 매개 변수를 통해 함수의 외부에서 콜백 함수를 전달받은 함수를 고차함수라 한다
  - 콜백 함수를 자신의 일부분으로 합성한다
  - 고차 함수에 의해 호출되며, 고차 함수는 필요에 따라 콜백 함수에 인수를 전달할 수 있다
- 즉시 실행 함수
- 순수 함수, 비순수 함수
