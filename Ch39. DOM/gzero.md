- DOM(Document Object Model)은 HTML 문서의 계층적 구조와 정보를 표현하며 이를 제어할 수 있는 DOM API, 즉 프로퍼티와 메서드를 제공하는 트리 자료구조다.

## 39.1 Node

### 39.1.1 HTML 요소와 노드 객체

```jsx
<div class="greeting">Hello</div>

// div - 시작 태그
// class - 어트리뷰트 이름
// greeting - 어트리뷰트 값
// hello - 콘텐츠
// /div - 종료 태그
```

- HTML 요소는 렌더링 엔진에 의해 파싱되어 DOM을 구성하는 요소 노드 객체로 변환한다.
- HTML 요소의 어트리뷰트는 어트리뷰트 노드로, 텍스트 콘텐츠는 텍스트 노드로 변환된다.
- 트리 자료구조
  - 트리 자료구조는 부모 노드와 자식 노드로 구성되어 노드 간의 계층적 구조를 표현하는 비선형 자료 구조를 말한다
  - 최상위 노드는 부모 노드가 없으며, 루트 노드라 한다
  - 자식 노드가 없는 노드를 리프 노드라 한다
- 노드 객체들로 구성된 트리 자료구조를 DOM이라 한다. (=DOM 트리)

### 39.1.2 노드 객체의 타입

- 문서 노드
  - DOM 트리 최상위에 존재하는 루트 노드로서 document 객체를 가리킨다. (`window.document`)
  - HTML 문서당 documents 객체는 유일하다
- 요소 노드
  - HTML 요소를 가리키는 객체이다
- 어트리뷰트 노ㄷ
  - 어트리뷰트가 지정된 HTML 요소의 요소 노드에만 연결되어 있다.
  - 어트리뷰트 노드에 접근하여 어트리뷰트를 참조하거나 변경하려면 요소 노드에 접근해야한다
- 텍스트 노드
  - HTML 요소의 텍스트를 가리키는 객체다
  - 텍스트 노드는 요소 노드의 자식이며, 자식 노드를 가질 수 없는 리프 노드다

### 39.1.3 노드 객체의 상속 구조

- 모든 노드 객체는 Object, EventTarget, Node 인터페이스를 상속받는다. 추가적으로 문서 노드는 Document, HTMLDocument 인터페이스를 상속받고 어트리뷰트 노드는 Attr, 텍스트 노드는 CharacterData 인터페이스를 각각 상속받는다.
- 프로토체인 관점에서 요소 노드 객체는 프로토타입 체인에 있는 모든 프르토타입의 프로퍼티나 메서드를 상속받아 사용할 수 있다

## 39.2 요소 노드 취득

### 39.2.1 id를 이용한 요소 노드 취득

- `getElementById` 메서드를 사용하며, 단 하나의 요소 노드만 반환한다
- 중복된 id가 존재할 가능성이 있으나, 이런 경우 첫 번째 요소 노드만 반환한다
- id 값을 갖는 요소가 없는 경우 null을 반환한다
- id 어트리뷰트를 부여하면 id 값과 동일한 이름의 전역 변수가 암묵적으로 선언되고 해당 노드 객체가 할당되는 부수 효과가 있다

### 39.2.2 태그 이름을 이용한 요소 노드 취득

- `getElementByTagName` 메서드를 사용하며, 전달한 태그 이름을 갖는 모든 요소 노드들을 탐색하여 DOM 컬렉션 객체인 `HTMLCollection` 객체를 반환한다
- `HTMLCollection` 객체는 유사 배열 객체이면서 이터러블이다.

### 39.2.3 class를 이용한 요소 노드 취득

- `getElementByClassName` 메서드를 사용하며, 전달한 class 이름을 갖는 모든 요소 노드들을 탐색하여 DOM 컬렉션 객체인 `HTMLCollection` 객체를 반환한다
- class 값은 공백으로 구분하여 여러 개의 class를 지정할 수 있다.

### 39.2.4 css 선택자를 이용한 요소 노드 취득

- 스타일을 적용하고자 하는 HTML 요소를 특정할 때 사용하는 문법이다
- `querySelector` 메서드는 인수로 전달한 CSS 선택자를 만족시키는 하나의 요소 노드를 탐색하여 반환한다
  - 여러 개인 경우 첫 번째 요소 노드만 반환
  - 요소 노드가 존재하지 않는 경우 null 반환
  - 문법에 맞지않는 경우 DOMException 에러 발생
- `querySelectorAll` 메서드는 인수로 전달한 CSS 선택자를 만족시키는 모든 요소 노드를 탐색하여 DOM 컬렉션 객체인 `NodeList` 객체를 반환한다
  - `NodeList` 객체는 유사 배열 객체이면서 이터러블이다
  - 요소가 존재하지 않는 경우 빈 NodeList 객체를 반환
  - 문법에 맞지 않는 경우 DOMException 에러 발생

### 39.2.5 특정 요소 노드를 취득할 수 있는지 확인

- `matches` 메서드를 사용한다. 이벤트 위임을 사용할 때 유용하다

### 39.2.6 HTMLCollection 과 NodeList 차이

- 공통점
  - DOM API가 여러 개의 결과값을 반환하기 위한 DOM 컬렉션 객체다
  - 유사 배열 객체이면서 이터러블이다. 따라서 for … of 문으로 순회할 수 있고 스프레드 문법을 사용해서 간단히 배열로 변환할 수 있다
  - 노드 객체의 상태 변화를 실시간으로 반영하는 살아있는 개체다
- 차이점
  - HTMLCollection
    - 항상 live 객체로 동작함
    - 실시간으로 노드 객체의 상태 변경을 반영하여 요소를 제거할 수 있기 때문에, HTMLCollection 객체를 for 문으로 순회하면서 노드 객체의 상태를 변경할때 주의해야한다
    - HTMLCollection 객체를 배열로 변환하여 사용하거나, 사용하지 않는 것이 좋다
  - NodeList
    - 과거의 정적 상태를 유지하는 non-live 객체로 동작하지만 경우에 따라 live 객체로 동작할 때가 있다.
    - childNodes 프로퍼티가 반환하는 NodeList 객체는 HTMLCollection 객체와 같이 실시간으로 노드 객체의 상태 변경을 반영하는 live 객체로 동작하므로 주의가 필요하다
- 노드 객체의 상태 변경과 상관없이 안전하게 DOM 컬렉션을 사용하려면 HTMLCollectiond이나 NodeList 객체를 스프레드 문법이나, Array.from을 사용해서 배열로 변환하여 사용하는 것을 권장한다

## 39.3 노드 탐색

- DOM 트리 상의 노드를 탐색할 수 있도록 Node, Element 인터페이스는 트리 탐색 프로퍼티를 제공한다.
- 노드 탐색 프로퍼티는 모두 일기 전용 접근자 프로퍼티다

### 39.3.1 공백 텍스트 노드

- HTML 요소 사이의 스페이스, 탭, 줄바꿈(개행) 등의 공백 문자는 텍스트 노드를 생성한다

## 39.7 어트리뷰트

- 모든 어트리뷰트 노드의 참조는 유사 배열 객체이자 이터러블인 `NameNodeMap` 객체에 담겨서 요소 노드의 attributes 프로퍼티에 저장된다.
- 요소 노드의 모든 어티르뷰트 노드는 요소 노드의 `Element.prototype.attributes` 프로퍼티로 취득할 수 있다.

### 39.7.3 HTML 어트리뷰트 vs. DOM 프로퍼티

- 요소 노드는 ‘초기 상태’와 ‘최신 상태’를 관리해야 한다. 초기 상태는 HTML 어트리뷰트 노드가 관리하며, 요소 노드이 최신 상태는 DOM 프로퍼티가 관리한다

  39.4 노드 정보 취득

  39.5 요소 노드의 텍스트 조작

  39.6 DOM 조작

  39.8 스타일

→ 책을 살펴보자!
